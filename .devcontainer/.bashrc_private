#!/bin/bash

source <(kubectl completion bash)
source <(helm completion bash)
source <(argocd completion bash)
source <(kustomize completion bash)
complete -C '/usr/local/bin/aws_completer' aws

# Dockerfile の terraform -install-autocomplete で.bashrcに自動的に追記されるが、備忘として明示的に残しておく
# https://developer.hashicorp.com/terraform/cli/commands#shell-tab-completion
complete -C '/usr/local/bin/terraform' terraform

. "$HOME/.cargo/env"

PATH="$PATH:$PROJECT_DIR/bin"

export AWS_REGION=ap-northeast-1
export AWS_DEFAULT_REGION=ap-northeast-1

# 共通のセットアップスクリプトを実行
source ${PROJECT_DIR}/.devcontainer/conf/common/setup.sh

# .devcontainer/.envのexport
if [ -f "${PROJECT_DIR}/.devcontainer/.env" ]; then
  envs=$(cat ${PROJECT_DIR}/.devcontainer/.env | grep -v -e "^$" -e "^ *#" | sed -e "s| *#.*$||" | xargs)
  if [ -n "$envs" ]; then
    export $envs
  fi
fi